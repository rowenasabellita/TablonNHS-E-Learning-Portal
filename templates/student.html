{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="{%static 'css/student.css'%}">
  <title>Student</title>
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <style>
  </style>


</head>

<body>
{% if user.is_authenticated and user.is_student%}
  <div class="container-fluid" id="background">
    <div class="container">
      <div class="row">
        <div class="col-3" id="image">
          <div class="file-upload-content">
            <img class="file-upload-image" src="{%static 'pictures/school.jpg'%}" width="200" height="200" alt=""/>
            <div class="image-title-wrap"></div>
          </div>
          <br>
          <div class="image-upload-wrap">
            <input class="file-upload input" type="file" onchange="readURL(this);" accept="image/" />
          </div>
        </div>

        <div class="col-7" id="label">
         <form method = "POST" enctype = "multipart/form-data">
            {% csrf_token%}
            <h1 align="center">
            Student Details <button type="submit" class="btn btn-secondary btn-sm" id="edit">Update Profile</button>
            </h1>
            <h5>Full Name : {{ user.get_full_name }}</h5>
            <h5>Email address : {{ user.email }}</h5>
            <h5>Grade Level : {{ user.userprofile.gradelevel}}</h5>
            <h5>Section : {{ user.userprofile.section}}</h5>
            {{s_form|crispy}}
            <br>
          </form>
        </div>
        <div class="col">
          `
          <button type="button" class="btn btn-secondary btn-md" id="logout"><a href = "/logout">LOG OUT<a/></button>
        </div>
      </div>
      <br><br><br>
      <a href="/studentsubject" type="button"><button class="btn btn-primary btn-lg">Subjects</button></a>
      <h2>WEEKLY STATUS COMPLETION</h2>
      <div class="b-skills">

        <br>

        <div class="row">
          <div class="col-xs-12 col-md-3 col-md-3">
            <div class="skill-item center-block">
              <div class="chart-container">
                <div class="chart " data-percent="92" data-bar-color="#23afe3">
                  <span class="percent" data-after="%">92</span>
                </div>
              </div>

              <p>WEEKLY</p>
            </div>
          </div>

          <div class="col-xs-12 col-md-3 col-md-3">
            <div class="skill-item center-block">
              <div class="chart-container">
                <div class="chart " data-percent="60" data-bar-color="#a7d212">
                  <span class="percent" data-after="%">60</span>
                </div>
              </div>

              <p>Monthly</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  </div>
  </div>


  <script src="{%static 'plugin/jquery-2.2.4.min.js'%}"></script>
  <script src="{%static 'plugin/jquery.appear.min.js'%}"></script>
  <script src="{%static 'plugin/jquery.easypiechart.min.js'%}"></script>
  <script>
    'use strict';

    var $window = $(window);

    function run() {
      var fName = arguments[0],
        aArgs = Array.prototype.slice.call(arguments, 1);
      try {
        fName.apply(window, aArgs);
      } catch (err) {

      }
    };

    /* chart
    ================================================== */
    function _chart() {
      $('.b-skills').appear(function () {
        setTimeout(function () {
          $('.chart').easyPieChart({
            easing: 'easeOutElastic',
            delay: 3000,
            barColor: '#369670',
            trackColor: '#fff',
            scaleColor: false,
            lineWidth: 21,
            trackWidth: 21,
            size: 250,
            lineCap: 'round',
            onStep: function (from, to, percent) {
              this.el.children[0].innerHTML = Math.round(percent);
            }
          });
        }, 150);
      });
    };


    $(document).ready(function () {

      run(_chart);


    });



  </script>
{% else %}
<script>
  alert("Access Denied!");
  setTimeout(function () {
    window.location.href = "/";
  }, 1000);
</script>
{%endif%}
</body>

</html>